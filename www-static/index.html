<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>Who's On My WiFi™</title>
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="js/jquery-1.9.1.min.js">;</script>
  <script type="text/javascript" src="js/jquery.json-2.4.min.js">;</script>
  <script type="text/javascript" src="js/luci-app-wiomw-functions.js">;</script>		
  <script type="text/javascript">
  
  //handle global login variables
  //these variables are passed with every json call
  var psalt = "";
  var phash = "";
  
  function show_psk_page()
  {
  
  
  }
  
  function show_ssid_page()
  {
      "Now, you will give your WiFi Network a <em class=\"clean-underline\">Name</em>: ";  
  }
  
  function set_network_settings()
  {
  
  
  
  }
  
  function show_login_page()
  {
  
    $("#input_top_message").html(' \
      <div class="twelve columns"> \
	<legend> \
	  Please enter your Who\'s On My WiFi™ <em class="clean-underline">Product Key</em> To Continue: \
	</legend> \
      </div> \
    ');
		    
    $("#input_fields").html(' \
	<div class="one-third column"> \
	  <input type="text" placeholder="Enter Key Here" name="password" id="password" class="u-full-width"> \
	</div> \
	<div class="two-thirds column"> \
	  <input type="button" class="button button-primary u-float-left" onClick="login();" value="SUBMIT KEY"> \
	</div>    \
    ');
    
    $("#input_notes").html(' \
      <div class="twelve columns"> \
	  <span class="instructionText">NOTE:   The Product Key will be found on the  underside of your new router.</span> \
      </div>    \
    ');
  
  }
  
  function login()
  {
    var statusmsg = "Logging In...";
    $("#statusText").html(statusmsg);
    var password = $("#password").val();
    var json_data = '{"password":"' + password + '"}';
    
    $.post("cgi-bin/sui.cgi?password", json_data)
	.done(function( json_response ) {		
		
		psalt = json_response.psalt;
		phash = json_response.phash;		
		$("#statusText").html("Login Successful");    	
	})
	.error(function (xhr, ajaxOptions, thrownError) {
	      $("#statusText").html("Login Error");    
	      switch(xhr.status)
	      {
		case 403: alert("Invalid Product Key"); break;
		default: alert(xhr.status); break;
	      }
	});                 
  }
  
  $(document).ready(function() {
    show_login_page();
    
  });
  
  </script>
</head>
<body>
   <div class="header-row">
      <div class="container">
        <h1>Welcome To  <em class="clean-underline">Your</em> WiFi </h1>
      </div>
    </div>
    <div class="container">
        
	  <form action="#" id="single_form">

	      <div class="row" id="input_top_message">

	      </div>    
	  
	  
	      <div class="row" id="input_fields">

	      </div>

	      <div class="row" id="input_notes">

	      </div>		  
            
	  </form>
	  
	  <div class="row" id="form_status">
	    <div class="twelve columns">
		<span id="statusText"></span>
	    </div>
	  </div>		  	  
	  
	    
    </div>
</body>
</html>